<!DOCTYPE html>
<html lang="en">
  <!-- Collaborator: Mackenzie Whitney -->
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contact Information</title>
    <link rel="stylesheet" href="../styles/contact.css" />
  </head>
  <body onload="populateLocationsTable()">
    <nav>
      <a href="./home.html">Home</a>
      <a href="./register.html">Register</a>
    </nav>
    <h1>Contact Information</h1>
    <div class="flex-container">
      <div>
        <h2>Our Phone Numbers</h2>
        <p>North American Phone Number: (555)-123-4567</p>
        <ul>
          <li>For New or Existing Bookings: ext. 1</li>
          <li>For Missing or Damaged Bags: ext. 2</li>
        </ul>
      </div>
      <div>
        <h2>Our E-mail</h2>
        <p>North America: travel-agency-NA@fake.com</p>
      </div>
    </div>
    <div>
      <div style="float: left">
        <h2>Our Locations</h2>
        <h3>Hover over or click address of an agency to see it on a map</h3>
        <table id="locationsTable">
          <tr>
            <th>Agency</th>
            <th>Address</th>
            <th>Phone Number</th>
          </tr>
        </table>
      </div>
      <div style="float: center">
        <iframe
          id="locationsMap"
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2508.385655353428!2d-114.09083652390187!3d51.045966444308256!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x53716fe76e972489%3A0xaacb381ac8c8399e!2s1155%208%20Ave%20SW%2C%20Calgary%2C%20AB!5e0!3m2!1sen!2sca!4v1717083358121!5m2!1sen!2sca"
          width="500"
          height="500"
          style="border: 0"
          allowfullscreen=""
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"
        ></iframe>
      </div>
    </div>
    <script>
      // data is to come from a database in Assignment 2
      const locations = [
        {
          agency: "Calgary",
          address: "1155 8th Ave SW, Calgary, AB, T2P1N3",
          googleMapLink: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2508.385655353428!2d-114.09083652390187!3d51.045966444308256!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x53716fe76e972489%3A0xaacb381ac8c8399e!2s1155%208%20Ave%20SW%2C%20Calgary%2C%20AB!5e0!3m2!1sen!2sca!4v1717083358121!5m2!1sen!2sca",
          phone: "(403) 271-9873",
          agents: [
            {
              name: "Janet Delton",
              phone: "(403) 210-7801",
            },
            {
              name: "Judy Lisle",
              phone: "(403) 210-7802",
            },
            {
              name: "Dennis Reynolds",
              phone: "(403) 210-7843",
            },
            {
              name: "John Coville",
              phone: "(403) 210-7823",
            },
            {
              name: "Beverly Jones",
              phone: "(403) 210-7812",
            }
          ],
        },
        {
          agency: "Okotoks",
          address: "110 Main Street, Okotoks, AB, T7R3J5",
          // location doesn't exist on map
          googleMapLink: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2525.3543219656235!2d-113.97037362392174!3d50.73191686705841!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x537199c9b3b424d3%3A0x7ffd70b532d128f2!2s110%20Okotoks%20Dr%2C%20Okotoks%2C%20AB!5e0!3m2!1sen!2sca!4v1717083471587!5m2!1sen!2sca",
          phone: "(403) 563-2381",
          agents: [
            {
              name: "Fred Smith",
              phone: "(403) 210-5555",
            },
            {
              name: "Bruce Dixon",
              phone: "(403) 210-7867",
            },
            {
              name: "Jane Merrill",
              phone: "(403) 210-7868",
            },
            {
              name: "Brian Peterson",
              phone: "(403) 210-7833",
            }
          ],
        }
      ];
      function populateLocationsTable() {
        const locationsTable = document.getElementById("locationsTable");
        locations.forEach((location) => {
          const row = document.createElement("tr");
          const agencyCell = document.createElement("td");
          const agencyCellContent = document.createTextNode(location.agency);
          agencyCell.appendChild(agencyCellContent);
          const addressCell = document.createElement("td");
          const addressCellContent = document.createTextNode(location.address);
          addressCell.appendChild(addressCellContent);
          const phoneCell = document.createElement("td");
          const phoneCellContent = document.createTextNode(location.phone);
          phoneCell.appendChild(phoneCellContent);
          row.appendChild(agencyCell);
          row.appendChild(addressCell);
          row.appendChild(phoneCell);
          locationsTable.appendChild(row);
          const agentHeaderRow = document.createElement("th");
          const agentHeaderCell = document.createElement("td");
          const agentHeaderContent = document.createTextNode("Agents");
          agentHeaderRow.colSpan = 2;
          agentHeaderRow.align = "right";
          agentHeaderCell.appendChild(agentHeaderContent);
          agentHeaderRow.appendChild(agentHeaderCell);
          locationsTable.appendChild(agentHeaderRow);
          const locationsMap = document.getElementById("locationsMap");
          addressCell.addEventListener("mouseover", () => {
            locationsMap.setAttribute("src", location.googleMapLink);
          });
          addressCell.addEventListener("click", () => {
            const googleMapWindow = window.open(
              location.googleMapLink,
              "",
              "popup=yes"
            );
          });
          location.agents.forEach((agent) => {
            const row = document.createElement("tr");
            const agentNameCell = document.createElement("td");
            agentNameCell.colSpan = 2;
            agentNameCell.align = "right";
            const agentNameCellContent = document.createTextNode(agent.name);
            agentNameCell.appendChild(agentNameCellContent);
            const agentPhoneCell = document.createElement("td");
            const agentPhoneCellContent = document.createTextNode(agent.phone);
            agentPhoneCell.appendChild(agentPhoneCellContent);
            row.appendChild(agentNameCell);
            row.appendChild(agentPhoneCell);
            locationsTable.appendChild(row);
          });
        });
      }
    </script>
  </body>
</html>
